<!-- 參考外國人寫的 -->
<!-- https://stackoverflow.com/questions/50706638/angular-toggle-child-with-unlimited-nesting/50781767 -->
<!-- https://ithelp.ithome.com.tw/m/articles/10205829 -->

<!-- <ul>
  <li *ngFor="let item of myArray; let i = index">
    <button (click)="toggle[i] = !toggle[i]">{{item.title }} - {{i}}</button>
    <div *ngIf="item.children && toggle[i]">
      <ng-container *ngTemplateOutlet="tree; context: { $implicit: item.children, idx: i }">
      </ng-container>
    </div>
  </li>
</ul>

<ng-template #tree let-allItems let-idx="idx">
  <ul>
    <li *ngFor="let item of allItems; let n = index">
      <button (click)="toggle[idx] = !toggle[idx]">X - {{idx}}</button>
      ^^^^
      Parent index
      <button (click)="toggle[idx + '.' + n] = !toggle[idx + '.' + n]">{{item.title}} - {{ idx + '.' + n}}</button>
      ^^^^^^^^^^^^^
      Child index
      <div *ngIf="item.children && toggle[idx + '.' + n]">
        <ng-container *ngTemplateOutlet="tree; context: { $implicit: item.children, idx: idx + '.' + n }">
        </ng-container>
        ^^^^^^^^^^^^^
        Child index becomes parent in next iteration
      </div>
    </li>
  </ul>
</ng-template> -->

<button mat-stroked-button (click)="IsEdited?IsEdited = false:IsEdited = true">編輯模式</button>

<ul>
  <li>常用連結(根目錄)
    <div *ngIf="IsEdited">
      <input type="text" placeholder="名稱" />
      <input type="text" placeholder="網址(資料夾不用填)" />
      <button mat-stroked-button>修改</button>
      <button mat-stroked-button (click)="Create($event)">新增</button>
    </div>
  </li>
  <ng-container *ngTemplateOutlet="tree; context: { $implicit: TreeDate, another: 1 }">
  </ng-container>
</ul>

<ng-template #tree let-AllItems let-another="another" let-idx="idx">
  <ul>

    <li *ngFor="let Item of AllItems;let _index = index">
      {{Item.NickName}} - [ {{another}} , {{_index}} ]
      <div *ngIf="IsEdited">
        <input type="text" placeholder="名稱" />
        <input type="text" placeholder="網址(資料夾不用填)" />
        <button mat-stroked-button>修改</button>
        <button mat-stroked-button (click)="Create(_index)">新增</button>
      </div>
      <ng-container *ngTemplateOutlet="tree; context: { $implicit: Item.Children, another:_index }">
      </ng-container>
    </li>
  </ul>
</ng-template>
